<Window x:Class="Chohan.App.Views.TwitchSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:Chohan.App.Converters"
        Title="Chohan - Twitchè¨­å®š"
        Width="500" Height="520"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BgDarkBrush}"
        ResizeMode="NoResize">

    <Window.Resources>
        <conv:HexToColorConverter x:Key="HexToColor" />

        <!-- ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« -->
        <Style x:Key="DarkTextBox" TargetType="TextBox">
            <Setter Property="Background">
                <Setter.Value><SolidColorBrush Color="#2D2D44" /></Setter.Value>
            </Setter>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="BorderBrush">
                <Setter.Value><SolidColorBrush Color="#4D4D6C" /></Setter.Value>
            </Setter>
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="FontFamily" Value="{StaticResource MainFont}" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="CaretBrush" Value="{StaticResource TextPrimaryBrush}" />
        </Style>

        <Style x:Key="DarkPasswordBox" TargetType="PasswordBox">
            <Setter Property="Background">
                <Setter.Value><SolidColorBrush Color="#2D2D44" /></Setter.Value>
            </Setter>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="BorderBrush">
                <Setter.Value><SolidColorBrush Color="#4D4D6C" /></Setter.Value>
            </Setter>
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="FontFamily" Value="{StaticResource MainFont}" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="CaretBrush" Value="{StaticResource TextPrimaryBrush}" />
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- ====== Row 0: ãƒ˜ãƒƒãƒ€ãƒ¼ ====== -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="Twitch é€£æºè¨­å®š"
                       Foreground="{StaticResource TextPrimaryBrush}"
                       FontFamily="{StaticResource MainFont}"
                       FontSize="20" FontWeight="SemiBold" />
            <TextBlock Text="Twitch Developer Consoleã§å–å¾—ã—ãŸClientæƒ…å ±ã‚’å…¥åŠ›ã—ã€èªè¨¼ã—ã¦ãã ã•ã„ã€‚"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontFamily="{StaticResource MainFont}"
                       FontSize="11" TextWrapping="Wrap"
                       Margin="0,4,0,0" />
        </StackPanel>

        <!-- ====== Row 1: æŽ¥ç¶šçŠ¶æ…‹ã‚«ãƒ¼ãƒ‰ ====== -->
        <Border Grid.Row="1"
                Background="{StaticResource BgMediumBrush}"
                CornerRadius="8" Padding="16,12"
                Margin="0,0,0,16">
            <DockPanel>
                <!-- çŠ¶æ…‹ã‚¢ã‚¤ã‚³ãƒ³ -->
                <Ellipse DockPanel.Dock="Left"
                         Width="12" Height="12" Margin="0,0,10,0"
                         VerticalAlignment="Center"
                         Fill="{Binding StatusColorHex, Converter={StaticResource HexToColor}}" />

                <!-- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ -->
                <Button DockPanel.Dock="Right"
                        Content="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"
                        Command="{Binding LogoutCommand}"
                        VerticalAlignment="Center">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource CompactButton}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsAuthenticated}" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- æŽ¥ç¶šçŠ¶æ…‹ãƒ†ã‚­ã‚¹ãƒˆ -->
                <TextBlock Text="{Binding ConnectionStatusText}"
                           Foreground="{Binding StatusColorHex, Converter={StaticResource HexToColor}}"
                           FontFamily="{StaticResource MainFont}"
                           FontSize="13" FontWeight="SemiBold"
                           VerticalAlignment="Center" />
            </DockPanel>
        </Border>

        <!-- ====== Row 2: Client IDå…¥åŠ› ====== -->
        <StackPanel Grid.Row="2" Margin="0,0,0,12">
            <TextBlock Text="Client ID"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontFamily="{StaticResource MainFont}"
                       FontSize="12" Margin="0,0,0,4" />
            <TextBox Style="{StaticResource DarkTextBox}"
                     Text="{Binding ClientId, UpdateSourceTrigger=PropertyChanged}" />
        </StackPanel>

        <!-- ====== Row 3: Client Secretå…¥åŠ› ====== -->
        <StackPanel Grid.Row="3" Margin="0,0,0,16">
            <TextBlock Text="Client Secret"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontFamily="{StaticResource MainFont}"
                       FontSize="12" Margin="0,0,0,4" />
            <PasswordBox x:Name="ClientSecretBox"
                         Style="{StaticResource DarkPasswordBox}"
                         PasswordChanged="ClientSecretBox_PasswordChanged" />
        </StackPanel>

        <!-- ====== Row 4: èªè¨¼ãƒœã‚¿ãƒ³ ====== -->
        <StackPanel Grid.Row="4" Margin="0,0,0,12">
            <!-- èªè¨¼ãƒœã‚¿ãƒ³ -->
            <Button Content="{Binding AuthButtonText}"
                    Command="{Binding AuthenticateCommand}"
                    IsEnabled="{Binding IsNotAuthenticated}"
                    Height="38"
                    FontSize="14" FontWeight="SemiBold"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background">
                            <Setter.Value><SolidColorBrush Color="#9146FF" /></Setter.Value>
                        </Setter>
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="FontFamily" Value="{StaticResource MainFont}" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="bd"
                                            Background="{TemplateBinding Background}"
                                            CornerRadius="6"
                                            Padding="16,0">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                          VerticalAlignment="Center" />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bd" Property="Background">
                                                <Setter.Value><SolidColorBrush Color="#A970FF" /></Setter.Value>
                                            </Setter>
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter Property="Opacity" Value="0.5" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>

            <!-- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒªãƒ³ã‚¯ -->
            <TextBlock HorizontalAlignment="Center" Margin="0,6,0,0">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsAuthenticating}" Value="True">
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
                <Hyperlink Command="{Binding CancelAuthCommand}">
                    <Run Text="ã‚­ãƒ£ãƒ³ã‚»ãƒ«" Foreground="{StaticResource TextSecondaryBrush}" />
                </Hyperlink>
            </TextBlock>
        </StackPanel>

        <!-- ====== Row 5: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ + ãƒ˜ãƒ«ãƒ— ====== -->
        <StackPanel Grid.Row="5" VerticalAlignment="Top">
            <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
            <TextBlock Text="{Binding StatusMessage}"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontFamily="{StaticResource MainFont}"
                       FontSize="11" TextWrapping="Wrap"
                       Margin="0,0,0,16" />

            <!-- ã‚¹ã‚³ãƒ¼ãƒ—èª¬æ˜Ž -->
            <Border Background="{StaticResource BgMediumBrush}"
                    CornerRadius="6" Padding="12,10">
                <StackPanel>
                    <TextBlock Text="ðŸ“‹ è¦æ±‚ã™ã‚‹ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆæ¨©é™ï¼‰"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               FontFamily="{StaticResource MainFont}"
                               FontSize="11" FontWeight="SemiBold"
                               Margin="0,0,0,6" />
                    <TextBlock Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource MainFont}"
                               FontSize="10" TextWrapping="Wrap"
                               Text="â€¢ channel:read:predictions â€” äºˆæƒ³ã®çŠ¶æ…‹ã‚’ç¢ºèª" />
                    <TextBlock Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource MainFont}"
                               FontSize="10" TextWrapping="Wrap"
                               Text="â€¢ channel:manage:predictions â€” äºˆæƒ³ã®ä½œæˆãƒ»ç¢ºå®šãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«" />
                    <TextBlock Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource MainFont}"
                               FontSize="10" TextWrapping="Wrap" Margin="0,6,0,0"
                               Opacity="0.7"
                               Text="ðŸ’¡ ãƒˆãƒ¼ã‚¯ãƒ³ã¯Windows DPAPIã§æš—å·åŒ–ã•ã‚Œã€ã“ã®PCã®ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿å¾©å·å¯èƒ½ã§ã™ã€‚" />
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- ====== Row 6: ãƒ•ãƒƒã‚¿ãƒ¼ ====== -->
        <Button Grid.Row="6"
                Content="é–‰ã˜ã‚‹"
                Style="{StaticResource CompactButton}"
                Click="CloseButton_Click"
                Width="80"
                HorizontalAlignment="Right"
                Margin="0,12,0,0" />
    </Grid>
</Window>
